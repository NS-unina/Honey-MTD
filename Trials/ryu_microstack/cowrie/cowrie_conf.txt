## COWRIE HONEYPOT CONFIGURATION

1. Enter in Honeypot host and change its ssh access port (default is 22). To do this go in sshd_config file.

$ sudo nano /etc/ssh/sshd_config

$ service ssh restart

2. Exit and log back in the host, now accessing to the new port.

To view the active services on an host:
$ netstat -tan

3. From now, follow the steps 1, 2, 3, 4 of the link (https://cowrie.readthedocs.io/en/latest/INSTALL.html) in order to setup Cowrie.

4. Change the cowrie configuration - RUNNING AUTHBIND.
At previous link in chapter Authbind.


$ cd /home/cowrie/cowrie/etc
$ cp cowrie.cfg.dist cowrie.cfg
$ nano cowrie.cfg

Change this file to enable ssh and telnet connections (Listening on port 22 and 23 - Authbind)

[honeypot]
hostname = name (optionally)

[ssh]
listen_endpoints = tcp:22:interface=0.0.0.0 (change the default ssh port)

[telnet]
enabled = true
listen_endpoints = tcp:23:interface=0.0.0.0 (change the default telnet port)

Save and exit.

$ sudo apt-get install authbind
$ sudo touch /etc/authbind/byport/22
$ sudo chown cowrie:cowrie /etc/authbind/byport/22
$ sudo chmod 770 /etc/authbind/byport/22

$ sudo touch /etc/authbind/byport/23
$ sudo chown cowrie:cowrie /etc/authbind/byport/23
$ sudo chmod 770 /etc/authbind/byport/23

5. Make a copy of userdb.example to allow authentications in Cowrie.
$ cd /home/cowrie/cowrie/etc
$ cp userdb.example userdb.txt